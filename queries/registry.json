{
  "version": "1.0",
  "description": "Query metadata registry mapping local SQL files to Dune query IDs",
  "queries": [
    {
      "name": "bitcoin_tx_features_daily",
      "file": "queries/bitcoin/bitcoin_tx_features_daily.sql",
      "dune_query_id": 6638509,
      "type": "base",
      "architecture": "v2",
      "smoke_test": "tests/bitcoin_tx_features_daily_smoke.sql",
      "dependencies": [],
      "description": "Unified base query - computes ALL transaction features (scores, cohorts, intents, privacy flags)"
    },
    {
      "name": "bitcoin_human_factor_scoring_v2",
      "file": "queries/bitcoin/bitcoin_human_factor_scoring_v2.sql",
      "dune_query_id": 6638635,
      "type": "nested",
      "architecture": "v2",
      "smoke_test": "tests/bitcoin_human_factor_scoring_smoke.sql",
      "dependencies": [
        "bitcoin_tx_features_daily"
      ],
      "description": "Aggregates human factor scores by day and score band"
    },
    {
      "name": "bitcoin_human_factor_cohort_matrix",
      "file": "queries/bitcoin/bitcoin_human_factor_cohort_matrix.sql",
      "dune_query_id": 6663464,
      "type": "nested",
      "architecture": "v2",
      "smoke_test": "tests/bitcoin_human_factor_cohort_matrix_smoke.sql",
      "dependencies": [
        "bitcoin_tx_features_daily"
      ],
      "description": "Cross-tabulation matrix: score band x cohort"
    },
    {
      "name": "bitcoin_cohort_matrix_drilldown",
      "file": "queries/bitcoin/bitcoin_cohort_matrix_drilldown.sql",
      "dune_query_id": 6680124,
      "type": "nested",
      "architecture": "v2",
      "smoke_test": "tests/bitcoin_cohort_matrix_drilldown_smoke.sql",
      "dependencies": [
        "bitcoin_human_factor_cohort_matrix"
      ],
      "description": "Cohort drilldown with zero-fill densification for dashboard charting"
    },
    {
      "name": "bitcoin_cohort_distribution_v2",
      "file": "queries/bitcoin/bitcoin_cohort_distribution_v2.sql",
      "dune_query_id": 6582426,
      "type": "nested",
      "architecture": "v2",
      "smoke_test": "tests/bitcoin_cohort_distribution_smoke.sql",
      "dependencies": [
        "bitcoin_tx_features_daily"
      ],
      "description": "Aggregates transactions by day and cohort (whale tiers)"
    },
    {
      "name": "bitcoin_utxo_heuristics_v2",
      "file": "queries/bitcoin/bitcoin_utxo_heuristics_v2.sql",
      "dune_query_id": null,
      "type": "nested",
      "architecture": "v2",
      "smoke_test": null,
      "dependencies": [
        "bitcoin_tx_features_daily"
      ],
      "description": "Aggregates transactions by day and intent classification"
    },
    {
      "name": "bitcoin_privacy_heuristics_v3",
      "file": "queries/bitcoin/bitcoin_privacy_heuristics_v3.sql",
      "dune_query_id": 6616271,
      "type": "nested",
      "architecture": "v2",
      "smoke_test": "tests/bitcoin_privacy_heuristics_v2_smoke.sql",
      "dependencies": [
        "bitcoin_tx_features_daily"
      ],
      "description": "Privacy analysis on 'other' intent transactions"
    },
    {
      "name": "bitcoin_utxo_heuristics",
      "file": "queries/bitcoin/bitcoin_utxo_heuristics.sql",
      "dune_query_id": 6614095,
      "type": "standalone",
      "architecture": "legacy",
      "smoke_test": null,
      "dependencies": [],
      "description": "DEPRECATED - Classifies transactions by intent (consolidation, fan_out, etc.)"
    },
    {
      "name": "bitcoin_human_factor_scoring",
      "file": "queries/bitcoin/bitcoin_human_factor_scoring.sql",
      "dune_query_id": null,
      "type": "standalone",
      "architecture": "legacy",
      "smoke_test": "tests/bitcoin_human_factor_scoring_extended_smoke.sql",
      "dependencies": [],
      "description": "DEPRECATED - Original human factor scoring query"
    },
    {
      "name": "bitcoin_cohort_distribution",
      "file": "queries/bitcoin/bitcoin_cohort_distribution.sql",
      "dune_query_id": null,
      "type": "standalone",
      "architecture": "legacy",
      "smoke_test": null,
      "dependencies": [],
      "description": "DEPRECATED - Original cohort distribution query"
    },
    {
      "name": "bitcoin_privacy_heuristics_v2",
      "file": "queries/bitcoin/bitcoin_privacy_heuristics_v2.sql",
      "dune_query_id": null,
      "type": "standalone",
      "architecture": "legacy",
      "smoke_test": "tests/smoke_test_privacy_heuristics_v2.sql",
      "dependencies": [],
      "description": "DEPRECATED - Use bitcoin_privacy_heuristics_v3"
    },
    {
      "name": "lending_action_ledger_morpho",
      "file": "queries/ethereum/lending/lending_action_ledger_morpho.sql",
      "dune_query_id": null,
      "type": "base",
      "architecture": "v2",
      "smoke_test": "tests/lending_action_ledger_morpho_smoke.sql",
      "dependencies": [],
      "description": "Unified action ledger for Morpho Aave V2 lending events"
    },
    {
      "name": "lending_action_ledger_aave_v3",
      "file": "queries/ethereum/lending/lending_action_ledger_aave_v3.sql",
      "dune_query_id": null,
      "type": "base",
      "architecture": "v2",
      "smoke_test": "tests/lending_action_ledger_aave_v3_smoke.sql",
      "dependencies": [],
      "description": "Unified action ledger for Aave V3 lending events"
    },
    {
      "name": "lending_action_ledger_unified",
      "file": "queries/ethereum/lending/lending_action_ledger_unified.sql",
      "dune_query_id": 6687961,
      "type": "base",
      "architecture": "v2",
      "smoke_test": "tests/lending_action_ledger_unified_smoke.sql",
      "dependencies": [],
      "description": "Multi-protocol unified stablecoin action ledger (Aave V3, Morpho Blue, Compound V3, Compound V2) with amounts, prices, and liquidations"
    },
    {
      "name": "lending_entity_balance_sheet",
      "file": "queries/ethereum/lending/lending_entity_balance_sheet.sql",
      "dune_query_id": null,
      "type": "nested",
      "architecture": "v2",
      "smoke_test": null,
      "dependencies": [
        "lending_action_ledger_unified"
      ],
      "description": "Per-entity balance sheets with collateral and debt positions"
    },
    {
      "name": "lending_flow_stitching",
      "file": "queries/ethereum/lending/lending_flow_stitching.sql",
      "dune_query_id": 6690272,
      "type": "nested",
      "architecture": "v2",
      "smoke_test": "tests/lending_flow_stitching_smoke.sql",
      "dependencies": [
        "lending_action_ledger_unified"
      ],
      "description": "Cross-protocol flow detection (borrow->transfer->supply)"
    },
    {
      "name": "lending_loop_detection",
      "file": "queries/ethereum/lending/lending_loop_detection.sql",
      "dune_query_id": null,
      "type": "nested",
      "architecture": "v2",
      "smoke_test": "tests/lending_loop_detection_smoke.sql",
      "dependencies": [
        "lending_flow_stitching"
      ],
      "description": "Multi-hop lending loop detection with recursion depth"
    },
    {
      "name": "lending_loop_metrics_daily",
      "file": "queries/ethereum/lending/lending_loop_metrics_daily.sql",
      "dune_query_id": null,
      "type": "nested",
      "architecture": "v2",
      "smoke_test": null,
      "dependencies": [
        "lending_loop_detection",
        "lending_flow_stitching"
      ],
      "description": "Daily aggregated metrics for lending loop activity"
    },
    {
      "name": "lending_sankey_flows",
      "file": "queries/ethereum/lending/lending_sankey_flows.sql",
      "dune_query_id": null,
      "type": "nested",
      "architecture": "v2",
      "smoke_test": null,
      "dependencies": [
        "lending_flow_stitching"
      ],
      "description": "Edge list dataset for Sankey diagram visualization"
    },
    {
      "name": "lending_entity_loop_storyboard",
      "file": "queries/ethereum/lending/lending_entity_loop_storyboard.sql",
      "dune_query_id": null,
      "type": "nested",
      "architecture": "v2",
      "smoke_test": null,
      "dependencies": [
        "lending_action_ledger_unified"
      ],
      "description": "Time-ordered per-entity loop traces with running totals"
    },
    {
      "name": "lending_collateral_ledger",
      "file": "queries/ethereum/lending/lending_collateral_ledger.sql",
      "dune_query_id": null,
      "type": "base",
      "architecture": "v2",
      "smoke_test": "tests/lending_collateral_ledger_smoke.sql",
      "dependencies": [],
      "description": "Multi-protocol collateral event ledger (WBTC, WETH, wstETH, weETH, rETH, cbETH) tracking what backs stablecoin borrows"
    },
    {
      "name": "lending_loop_collateral_profile",
      "file": "queries/ethereum/lending/lending_loop_collateral_profile.sql",
      "dune_query_id": null,
      "type": "nested",
      "architecture": "v2",
      "smoke_test": null,
      "dependencies": [
        "lending_flow_stitching",
        "lending_collateral_ledger"
      ],
      "description": "Joins cross-protocol flows with collateral positions to segment loop activity by backing asset (BTC vs ETH vs LST)"
    }
  ]
}
